# DOCUMENT_TYPE: REQUIREMENTS_REGISTRY
# VERSION: 1.0

> Single source of truth for all requirements.

## 1. Status Legend

- `proposed`, `approved`, `in_progress`, `implemented`, `tested`, `accepted`, `deprecated`

## 2. Requirements Table

### I. FOUNDATIONAL ARCHITECTURE REQUIREMENTS

| REQ_ID   | Title                                    | Type            | Priority | Status     | Description                                                                          | Sources                     | Modules (FE/BE)                        | Tests (IDs) | Notes |
|----------|------------------------------------------|-----------------|----------|-----------|--------------------------------------------------------------------------------------|-----------------------------|----------------------------------------|-------------|-------|
| REQ-101  | File-based data persistence              | functional      | critical | implemented | Store data using JSON for metadata and markdown for text content                     | Func 1.1.1                  | MOD-BE-Storage, MOD-BE-FileSystem      | TC-UNIT-101 | See [DETAILED_SPEC_REQ-101](detailed_specs/DETAILED_SPEC_REQ-101_FileBasedPersistence.md) |
| REQ-102  | Directory hierarchy with metadata        | functional      | critical | implemented | Maintain structured directory hierarchy with JSON metadata files                      | Func 1.1.2                  | MOD-BE-Storage, MOD-BE-FileSystem      | TC-UNIT-102 | Sessions not under projects yet |
| REQ-103  | Version control in metadata              | functional      | critical | implemented | Each project and session has metadata.json with timestamps                            | Func 1.1.3                  | MOD-BE-Storage                         | TC-UNIT-103 | Supports parent_id for nesting |
| REQ-104  | Message history persistence              | functional      | critical | implemented | Store message histories in messages.json per session                                  | Func 1.1.4                  | MOD-BE-Storage, MOD-BE-ConversationSvc | TC-UNIT-104 | Design called for .jsonl format |
| REQ-105  | API key environment variables            | security        | critical | implemented | Store API keys only in environment variables, never hardcoded                        | Func 1.3.1                  | MOD-BE-Settings, MOD-BE-Security       | TC-UNIT-105 | No keys in codebase |
| REQ-106  | .env file for API key persistence        | security        | critical | implemented | Persist API keys in .env file at project root                                        | Func 1.3.2                  | MOD-BE-Settings, MOD-BE-FileSystem     | TC-UNIT-106 | Hot-reload capable |
| REQ-107  | Multiple provider API key support        | functional      | critical | implemented | Support multiple AI provider API keys simultaneously                                  | Func 1.3.3                  | MOD-BE-Settings, MOD-BE-AIProvider     | TC-UNIT-107 | OpenAI, Anthropic supported |
| REQ-108  | Settings page API key access             | security        | critical | implemented | API keys only accessible through secure Settings page                                | Func 1.3.4                  | MOD-FE-Settings, MOD-BE-Settings       | TC-UNIT-108 | Keys masked in UI |
| REQ-109  | API key update without restart           | functional      | critical | implemented | Update API keys without requiring application restart                                | Func 1.3.5                  | MOD-BE-Settings, MOD-BE-AIProvider     | TC-UNIT-109 | Hot-reload implemented |
| REQ-110  | Single-user architecture                 | functional      | critical | implemented | Application designed for single-user local execution                                  | Func 1.2.1-1.2.4            | MOD-BE-Core, MOD-FE-Core               | TC-UNIT-110 | No auth required |
| REQ-111  | Error handling & logging                 | functional      | high     | implemented | Graceful error handling with console logging for debugging                           | Func 1.4.1-1.4.5            | MOD-BE-ErrorHandler, MOD-FE-ErrorHandler | TC-UNIT-111 | API errors displayed to user |
| REQ-112  | Testing strategy implementation          | functional      | high     | implemented | Unit, integration, component, and E2E tests with 80% coverage target                 | Func 1.5.1-1.5.6            | MOD-BE-Testing, MOD-FE-Testing        | TC-UNIT-112 | Tests in CI/CD pipeline |

### II. WORKSPACE ORGANIZATION & STRUCTURE

| REQ_ID   | Title                                    | Type            | Priority | Status     | Description                                                                          | Sources                     | Modules (FE/BE)                        | Tests (IDs) | Notes |
|----------|------------------------------------------|-----------------|----------|-----------|--------------------------------------------------------------------------------------|-----------------------------|----------------------------------------|-------------|-------|
| REQ-201  | Three-level workspace hierarchy          | functional      | critical | implemented | Main Chat → Projects → Sessions hierarchy                                             | Func 2.1.1                  | MOD-BE-ProjectSvc, MOD-FE-Workspace    | TC-UNIT-201 | See [DETAILED_SPEC_REQ-201](detailed_specs/DETAILED_SPEC_REQ-201_ThreeLevelWorkspaceHierarchy.md) |
| REQ-202  | Default project auto-creation            | functional      | critical | implemented | Auto-create default project on first application launch                              | Func 2.1.2                  | MOD-BE-ProjectSvc                      | TC-UNIT-202 | Created automatically on init |
| REQ-203  | Default project functionality            | functional      | critical | implemented | Default project has identical functionality to user-created projects                 | Func 2.1.3                  | MOD-BE-ProjectSvc, MOD-FE-Workspace    | TC-UNIT-203 | All CRUD operations work |
| REQ-204  | User-created projects                    | functional      | critical | implemented | Users can create projects to group related chats and files                           | Func 2.1.4                  | MOD-BE-ProjectSvc, MOD-FE-ProjectMgmt | TC-UNIT-204 | Projects contain sessions/files |
| REQ-205  | Nested project structure                 | functional      | critical | implemented | Support unlimited nesting of projects (projects within projects)                     | Func 2.1.5                  | MOD-BE-ProjectSvc, MOD-FE-ProjectTree  | TC-UNIT-205 | parent_id field enables nesting |
| REQ-206  | Chat session isolation                   | functional      | critical | implemented | Each chat maintained in separate session to preserve context                         | Func 2.1.6                  | MOD-BE-ChatSessionSvc                  | TC-UNIT-206 | Prevents context bleed |
| REQ-207  | Session context includes files           | functional      | high     | implemented | Session context includes both project and session-specific files                     | Func 2.1.7                  | MOD-BE-ChatSessionSvc, MOD-BE-FileSvc  | TC-UNIT-207 | Context building supported |
| REQ-208  | Cross-session context references         | functional      | low      | proposed   | Future: Reference other chat sessions in current context                            | Func 2.1.8                  | MOD-BE-ConversationSvc                 | TC-FUNC-208 | Phase 4 feature |
| REQ-209  | Project CRUD operations                  | functional      | critical | implemented | Create, read, update, delete projects with unique names                              | Func 2.2.1-2.2.3            | MOD-BE-ProjectSvc, MOD-FE-ProjectMgmt | TC-UNIT-209 | Cascade delete supported |
| REQ-210  | Project tree view display                | functional      | critical | implemented | Display all projects in hierarchical tree view on sidebar                            | Func 2.2.8                  | MOD-FE-Sidebar, MOD-FE-ProjectTree     | TC-FUNC-210 | Expand/collapse functionality |
| REQ-211  | Project workspace loading                | functional      | critical | implemented | Load project workspace and files on project selection                                | Func 2.2.9                  | MOD-FE-Workspace, MOD-BE-ProjectSvc    | TC-FUNC-211 | Auto-loads workspace |
| REQ-212  | Last accessed project persistence        | functional      | high     | implemented | Persist last accessed project across application restarts                            | Func 2.2.10                 | MOD-FE-State, MOD-BE-UserStateSvc      | TC-FUNC-212 | localStorage persistence |
| REQ-213  | Session CRUD operations                  | functional      | critical | implemented | Create, read, update, delete chat sessions within projects                           | Func 2.3.1-2.3.3            | MOD-BE-ChatSessionSvc, MOD-FE-ChatMgmt | TC-UNIT-213 | Cascade delete on deletion |
| REQ-214  | Message history isolation                | functional      | critical | implemented | Each session maintains isolated message history                                      | Func 2.3.4                  | MOD-BE-ChatSessionSvc                  | TC-UNIT-214 | Per-session messages.json |
| REQ-215  | Session-specific files                   | functional      | high     | implemented | Support file attachments specific to individual sessions                             | Func 2.3.11                 | MOD-BE-FileSvc, MOD-FE-FileMgmt        | TC-UNIT-215 | Isolated per session |
| REQ-216  | Session switching auto-save              | functional      | high     | implemented | Auto-save current session before switching to another session                        | Func 2.3.8                  | MOD-BE-ChatSessionSvc, MOD-FE-Workspace | TC-FUNC-216 | Messages persisted before switch |
| REQ-217  | Session list under project               | functional      | high     | implemented | Display session list under current project in expandable section                     | Func 2.3.9                  | MOD-FE-Sidebar                         | TC-FUNC-217 | Shows in sidebar |
| REQ-218  | Last accessed session persistence        | functional      | high     | implemented | Persist last accessed session across application restarts                            | Func 2.3.10                 | MOD-FE-State, MOD-BE-UserStateSvc      | TC-FUNC-218 | Zustand persist middleware |

### III. USER INTERFACE - MAIN SCREEN

| REQ_ID   | Title                                    | Type            | Priority | Status     | Description                                                                          | Sources                     | Modules (FE/BE)                        | Tests (IDs) | Notes |
|----------|------------------------------------------|-----------------|----------|-----------|--------------------------------------------------------------------------------------|-----------------------------|----------------------------------------|-------------|-------|
| REQ-301  | Header bar at top                        | functional      | critical | implemented | Fixed header bar (~80px height) with title, search, provider selector, settings      | Func 3.1.1, 3.2            | MOD-FE-Header                          | TC-FUNC-301 | See [DETAILED_SPEC_REQ-301](detailed_specs/DETAILED_SPEC_REQ-301_HeaderBar.md) |
| REQ-302  | Status bar below header                  | functional      | high     | implemented | Fixed status bar (~40px) showing project path, session name, message count           | Func 3.1.2                  | MOD-FE-StatusBar                       | TC-FUNC-302 | Minimal content currently |
| REQ-303  | Resizable left sidebar                   | functional      | critical | implemented | Left sidebar (~280px default) with project tree and session list                    | Func 3.1.3                  | MOD-FE-Sidebar                         | TC-FUNC-303 | Collapse/expand toggle |
| REQ-304  | Main chat content area                   | functional      | critical | implemented | Main content area with scrollable message display and input at bottom               | Func 3.1.4                  | MOD-FE-ChatArea                        | TC-FUNC-304 | Auto-scroll to bottom |
| REQ-305  | Application title and logo               | functional      | high     | implemented | Display application title and branding in header                                     | Func 3.2.1                  | MOD-FE-Header                          | TC-FUNC-305 | Top-left of header |
| REQ-306  | Search bar with dropdown results         | functional      | high     | implemented | Search messages and files with dropdown showing results                              | Func 3.2.2                  | MOD-FE-SearchBar, MOD-BE-SearchSvc     | TC-FUNC-306 | Full-text search supported |
| REQ-307  | AI provider selector dropdown            | functional      | critical | implemented | Dropdown to view and select from available AI providers in real-time                | Func 3.2.3                  | MOD-FE-ProviderSelector, MOD-BE-AIProvider | TC-FUNC-307 | Shows model count, config status |
| REQ-308  | Settings button in header                | functional      | critical | implemented | Button linking to Settings page for configuration management                        | Func 3.2.4                  | MOD-FE-Header, MOD-FE-SettingsPage     | TC-FUNC-308 | Navigates to /settings |
| REQ-309  | User profile menu dropdown               | functional      | medium   | implemented | User profile/menu dropdown with profile info and logout                             | Func 3.2.5                  | MOD-FE-UserMenu                        | TC-FUNC-309 | Single-user limited features |
| REQ-310  | Project tree view in sidebar             | functional      | critical | implemented | Hierarchical project tree with expand/collapse and current project highlighting    | Func 3.3.1                  | MOD-FE-ProjectTree                     | TC-FUNC-310 | Recursive rendering |
| REQ-311  | Session list under current project       | functional      | critical | implemented | Display sessions under current project with creation date and unread count          | Func 3.3.2                  | MOD-FE-Sidebar                         | TC-FUNC-311 | Shows in expandable section |
| REQ-312  | Context menu on right-click              | functional      | high     | proposed   | Right-click context menu for delete, rename, archive project/session                | Func 3.3.3                  | MOD-FE-ContextMenu                     | TC-FUNC-312 | Future enhancement |
| REQ-313  | New Project button                       | functional      | critical | implemented | Button to create new project with parent project selection for nesting              | Func 3.3.4                  | MOD-FE-ProjectMgmt                     | TC-FUNC-313 | Opens creation modal |
| REQ-314  | New Session button                       | functional      | critical | implemented | Visible button to create new session within selected project                        | Func 3.3.5                  | MOD-FE-ChatMgmt                        | TC-FUNC-314 | Requires project selection |
| REQ-315  | Message display in chat bubbles          | functional      | critical | implemented | Display messages in conversational format with chat bubble styling                  | Func 3.4.1                  | MOD-FE-ChatArea                        | TC-FUNC-315 | Tailwind CSS styled |
| REQ-316  | User/AI message alignment                | functional      | critical | implemented | User messages right-aligned (blue), AI messages left-aligned (gray)                 | Func 3.4.2-3.4.3            | MOD-FE-ChatMessage                     | TC-FUNC-316 | Flexbox layout |
| REQ-317  | Message timestamps                       | functional      | high     | implemented | Show HH:MM timestamp for each message                                                | Func 3.4.4                  | MOD-FE-ChatMessage                     | TC-FUNC-317 | Uses message.timestamp |
| REQ-318  | Provider name display for AI messages    | functional      | high     | implemented | Show AI provider name below AI messages                                               | Func 3.4.5                  | MOD-FE-ChatMessage                     | TC-FUNC-318 | Resolved from providerId |
| REQ-319  | Auto-scroll to latest message            | functional      | critical | implemented | Auto-scroll to newest message on arrival with smooth animation                      | Func 3.4.6                  | MOD-FE-ChatArea                        | TC-FUNC-319 | scrollIntoView with smooth |
| REQ-320  | Preserve scroll position in history      | functional      | high     | implemented | Preserve scroll position when viewing message history                                | Func 3.4.7                  | MOD-FE-ChatArea                        | TC-FUNC-320 | No auto-jump on scroll |
| REQ-321  | Copy message to clipboard                | functional      | high     | implemented | Support copying individual messages to clipboard with visual feedback               | Func 3.4.8                  | MOD-FE-ChatMessage                     | TC-FUNC-321 | Uses navigator.clipboard |
| REQ-322  | Loading indicator for AI response        | functional      | high     | implemented | Show animated spinner while waiting for AI response                                  | Func 3.4.9                  | MOD-FE-ChatArea                        | TC-FUNC-322 | Animated spinner |
| REQ-323  | Multi-line text input                    | functional      | critical | implemented | Auto-expanding textarea with Enter, Shift+Enter, Ctrl+Enter key support            | Func 3.5.1                  | MOD-FE-ChatInput                       | TC-FUNC-323 | Key combinations supported |
| REQ-324  | Send button                              | functional      | critical | implemented | Send button with state management (disabled when empty or loading)                  | Func 3.5.2                  | MOD-FE-ChatInput                       | TC-FUNC-324 | Shows spinner during send |
| REQ-325  | Character counter                        | functional      | medium   | implemented | Character counter shown when approaching maximum length                             | Func 3.5.3                  | MOD-FE-ChatInput                       | TC-FUNC-325 | Enforced at submission |
| REQ-326  | Message attachments (future)             | functional      | medium   | proposed   | Support file attachments to messages with 50MB limit per file                       | Func 3.5.4                  | MOD-FE-FileUpload, MOD-BE-FileSvc      | TC-FUNC-326 | Phase 2 feature |
| REQ-327  | Message formatting support (future)     | functional      | medium   | proposed   | Support markdown formatting (bold, italics, code blocks) in messages                | Func 3.5.5                  | MOD-FE-MessageFormatter                | TC-FUNC-327 | Phase 2 feature |

### IV. CHAT & MESSAGING FEATURES

| REQ_ID   | Title                                    | Type            | Priority | Status     | Description                                                                          | Sources                     | Modules (FE/BE)                        | Tests (IDs) | Notes |
|----------|------------------------------------------|-----------------|----------|-----------|--------------------------------------------------------------------------------------|-----------------------------|----------------------------------------|-------------|-------|
| REQ-401  | Save user messages with metadata         | functional      | critical | implemented | Persist user messages with timestamp, role, and status metadata                      | Func 4.1.1                  | MOD-BE-ConversationSvc                 | TC-UNIT-401 | See [DETAILED_SPEC_REQ-401](detailed_specs/DETAILED_SPEC_REQ-401_MessageHistory.md) |
| REQ-402  | Save AI responses with metadata          | functional      | critical | implemented | Persist AI responses with provider, tokens, and finish reason                        | Func 4.1.2                  | MOD-BE-ConversationSvc                 | TC-UNIT-402 | Provider-specific data tracked |
| REQ-403  | Message persistence to disk              | functional      | critical | implemented | Persist all messages to disk in JSON format per session                              | Func 4.1.3                  | MOD-BE-ChatSessionSvc                  | TC-UNIT-403 | Using .json format |
| REQ-404  | Load message history on session open     | functional      | critical | implemented | Load full message history when opening a session                                     | Func 4.1.4                  | MOD-BE-ChatSessionSvc, MOD-FE-ChatArea | TC-FUNC-404 | Loads complete history |
| REQ-405  | Message status tracking                  | functional      | high     | implemented | Track message status (sent, failed, pending) for all messages                        | Func 4.1.5                  | MOD-BE-ConversationSvc                 | TC-UNIT-405 | Status persisted |
| REQ-406  | Error messages on send failure           | functional      | high     | implemented | Display error messages to user when message sending fails                            | Func 4.1.6                  | MOD-FE-ChatArea, MOD-BE-ErrorHandler   | TC-FUNC-406 | Toast notifications |
| REQ-407  | Retry failed message sending             | functional      | high     | implemented | Support retrying failed messages without creating duplicates                        | Func 4.1.7                  | MOD-FE-ChatMessage, MOD-BE-ConversationSvc | TC-FUNC-407 | Clears error state |
| REQ-408  | Message deletion support                 | functional      | high     | implemented | Delete messages with user confirmation                                               | Func 4.1.8                  | MOD-FE-ChatMessage, MOD-BE-ConversationSvc | TC-FUNC-408 | Requires confirmation |
| REQ-409  | Load full message history                | functional      | critical | implemented | Load complete message history on session open for context                           | Func 4.2.1                  | MOD-BE-ChatSessionSvc                  | TC-FUNC-409 | Suitable for typical sizes |
| REQ-410  | Message pagination for large histories   | functional      | medium   | implemented | Support pagination for large message histories                                       | Func 4.2.2                  | MOD-BE-ChatSessionSvc, MOD-FE-ChatArea | TC-FUNC-410 | API supports but no UI yet |
| REQ-411  | Project files in AI context              | functional      | high     | implemented | Include project files in AI message context                                          | Func 4.2.3                  | MOD-BE-FileSvc, MOD-BE-ConversationSvc | TC-UNIT-411 | Retrieved for context |
| REQ-412  | Session files in AI context              | functional      | high     | implemented | Include session-specific files in AI message context                                 | Func 4.2.4                  | MOD-BE-FileSvc, MOD-BE-ConversationSvc | TC-UNIT-412 | Retrieved for context |
| REQ-413  | Token counting for context estimation    | functional      | high     | implemented | Track token usage (prompt + completion) for context size estimation                 | Func 4.2.7                  | MOD-BE-AIProvider, MOD-BE-ConversationSvc | TC-UNIT-413 | Per-message tracking |
| REQ-414  | Create and save templates                | functional      | medium   | implemented | Create and persist message templates with category support                          | Func 4.3.1-4.3.2            | MOD-BE-TemplatesSvc, MOD-FE-TemplateManager | TC-UNIT-414 | JSON file storage |
| REQ-415  | Quick template insertion                 | functional      | medium   | implemented | One-click insertion of templates into chat input                                     | Func 4.3.3                  | MOD-FE-ChatInput                       | TC-FUNC-415 | Template dropdown |
| REQ-416  | Template preview before insertion        | functional      | medium   | implemented | Preview template content and placeholders before insertion                          | Func 4.3.4                  | MOD-FE-TemplateManager                 | TC-FUNC-416 | Modal preview |
| REQ-417  | Edit and delete templates                | functional      | medium   | implemented | Full CRUD operations for template management                                        | Func 4.3.5                  | MOD-BE-TemplatesSvc, MOD-FE-TemplateManager | TC-UNIT-417 | Requires confirmation |
| REQ-418  | Template parameter substitution          | functional      | medium   | implemented | Support {{variable}} placeholder substitution in templates                           | Func 4.3.6                  | MOD-BE-TemplatesSvc                    | TC-UNIT-418 | Regex-based substitution |

### V. AI PROVIDER INTEGRATION

| REQ_ID   | Title                                    | Type            | Priority | Status     | Description                                                                          | Sources                     | Modules (FE/BE)                        | Tests (IDs) | Notes |
|----------|------------------------------------------|-----------------|----------|-----------|--------------------------------------------------------------------------------------|-----------------------------|----------------------------------------|-------------|-------|
| REQ-501  | Multiple AI provider support             | functional      | critical | implemented | Support multiple AI providers (OpenAI, Anthropic) with switchable models             | Func 5.1.1, Plan 3          | MOD-BE-AIProvider, MOD-FE-ProviderSelector | TC-UNIT-501 | See [DETAILED_SPEC_REQ-501](detailed_specs/DETAILED_SPEC_REQ-501_MultiProviderSupport.md) |
| REQ-502  | Unique API endpoint and authentication   | functional      | critical | implemented | Each provider has unique base_url and api_key_env_var configuration                 | Func 5.1.2                  | MOD-BE-AIProvider                      | TC-UNIT-502 | See [DETAILED_SPEC_REQ-502](detailed_specs/DETAILED_SPEC_REQ-502_APIEndpointAuth.md) |
| REQ-503  | Provider-specific parameters             | functional      | critical | implemented | Configure provider parameters (temperature, max_tokens, top_p, etc.)                | Func 5.1.3                  | MOD-BE-AIProvider, MOD-FE-SettingsPage | TC-UNIT-503 | See [DETAILED_SPEC_REQ-503](detailed_specs/DETAILED_SPEC_REQ-503_ProviderParameters.md) |
| REQ-504  | Provider configuration in .env           | security        | critical | implemented | Store provider configurations securely in .env file                                 | Func 5.1.4                  | MOD-BE-Settings                        | TC-UNIT-504 | See [DETAILED_SPEC_REQ-504](detailed_specs/DETAILED_SPEC_REQ-504_EnvStorage.md) |
| REQ-505  | Dynamic provider availability loading    | functional      | critical | implemented | Dynamically load available providers based on configured API keys                   | Func 5.1.5                  | MOD-BE-AIProvider                      | TC-UNIT-505 | is_available flag updated |
| REQ-506  | Provider availability status display     | functional      | critical | implemented | Display provider status (✓ configured / ✗ not configured) in UI                    | Func 5.1.6                  | MOD-FE-ProviderSelector                | TC-FUNC-506 | Visual indicator |
| REQ-507  | Provider selector in header              | functional      | critical | implemented | Dropdown in header to view and select available AI providers                        | Func 5.3.1-5.3.3            | MOD-FE-ProviderSelector                | TC-FUNC-507 | Shows current + models |
| REQ-508  | Current provider display with badge      | functional      | critical | implemented | Display currently selected provider with icon/badge in header                       | Func 5.3.2                  | MOD-FE-ProviderSelector                | TC-FUNC-508 | Name + icon shown |
| REQ-509  | Provider model count display             | functional      | high     | implemented | Show number of models available per provider in dropdown                            | Func 5.3.5                  | MOD-FE-ProviderSelector                | TC-FUNC-509 | "3 models" format |
| REQ-510  | Checkmark for current selection          | functional      | high     | implemented | Visual checkmark indicator for currently selected provider                          | Func 5.3.6                  | MOD-FE-ProviderSelector                | TC-FUNC-510 | Clear visual distinction |
| REQ-511  | One-click provider switching             | functional      | critical | implemented | Switch providers with single click without interrupting current session             | Func 5.3.7-5.3.8            | MOD-FE-ProviderSelector                | TC-FUNC-511 | Seamless switching |
| REQ-512  | Provider selection persistence           | functional      | high     | implemented | Persist selected provider across application restarts                               | Func 5.3.9                  | MOD-FE-State, MOD-BE-UserStateSvc      | TC-FUNC-512 | Zustand persist |
| REQ-513  | Prevent unconfigured provider selection  | functional      | critical | implemented | Disable selection of providers without configured API keys                          | Func 5.3.10                 | MOD-FE-ProviderSelector                | TC-FUNC-513 | Disabled state UI |
| REQ-514  | Send message to provider API             | functional      | critical | implemented | Send user messages to selected provider API and receive responses                   | Func 5.4.1                  | MOD-BE-ConversationSvc, MOD-BE-AIProvider | TC-FUNC-514 | Routes to correct provider |
| REQ-515  | Format messages per provider             | functional      | critical | implemented | Format messages according to provider-specific requirements                         | Func 5.4.2                  | MOD-BE-AIProvider                      | TC-UNIT-515 | OpenAI and Anthropic formats |
| REQ-516  | Include system prompt                    | functional      | high     | implemented | Include system prompt in message list if specified                                  | Func 5.4.3                  | MOD-BE-ConversationSvc                 | TC-UNIT-516 | Can be overridden |
| REQ-517  | Include message history as context       | functional      | critical | implemented | Include full message history as context in API requests                             | Func 5.4.4                  | MOD-BE-ConversationSvc                 | TC-UNIT-517 | Token limits respected |
| REQ-518  | Apply provider-specific configuration    | functional      | critical | implemented | Apply temperature, max_tokens, and other parameters from provider config            | Func 5.4.5                  | MOD-BE-AIProvider                      | TC-UNIT-518 | Per-request override capable |
| REQ-519  | Parse provider response                  | functional      | critical | implemented | Parse and handle provider-specific response formats                                 | Func 5.4.6                  | MOD-BE-AIProvider                      | TC-UNIT-519 | Format-specific parsing |
| REQ-520  | Extract generated text from response     | functional      | critical | implemented | Extract text content from provider API response                                     | Func 5.4.7                  | MOD-BE-AIProvider                      | TC-UNIT-520 | Handles streaming/non-streaming |
| REQ-521  | Extract token usage from response        | functional      | high     | implemented | Extract token counts (prompt, completion, total) from response                      | Func 5.4.8                  | MOD-BE-AIProvider                      | TC-UNIT-521 | Per-message tracking |
| REQ-522  | Handle API errors gracefully             | functional      | critical | implemented | Handle timeout, rate limit, auth, and invalid request errors                        | Func 5.4.9                  | MOD-BE-ErrorHandler, MOD-BE-AIProvider | TC-FUNC-522 | Retry + backoff logic |
| REQ-523  | Display response in chat interface       | functional      | critical | implemented | Display AI response in chat area with formatting and metadata                       | Func 5.4.10                 | MOD-FE-ChatArea                        | TC-FUNC-523 | Message bubble styled |
| REQ-524  | Save response with metadata              | functional      | critical | implemented | Persist response with provider_id, tokens, finish_reason, timestamp                 | Func 5.4.11                 | MOD-BE-ConversationSvc                 | TC-UNIT-524 | Complete metadata stored |

### VI. FILE MANAGEMENT

| REQ_ID   | Title                                    | Type            | Priority | Status     | Description                                                                          | Sources                     | Modules (FE/BE)                        | Tests (IDs) | Notes |
|----------|------------------------------------------|-----------------|----------|-----------|--------------------------------------------------------------------------------------|-----------------------------|----------------------------------------|-------------|-------|
| REQ-601  | Upload files to project workspace        | functional      | high     | implemented | Upload and store files in project workspace directory                               | Func 6.1.1, Plan 5          | MOD-BE-FileSvc, MOD-FE-FileUpload      | TC-UNIT-601 | POST /api/files/upload |
| REQ-602  | Project file accessibility               | functional      | high     | implemented | All sessions in project can access project-level files                              | Func 6.1.2                  | MOD-BE-FileSvc                         | TC-UNIT-602 | No session restrictions |
| REQ-603  | Project file listing                     | functional      | high     | implemented | List all files in project workspace with metadata                                    | Func 6.1.3, Plan 5          | MOD-BE-FileSvc, MOD-FE-FileList        | TC-FUNC-603 | GET /api/files/projects/{id} |
| REQ-604  | Download files from project              | functional      | high     | implemented | Download files from project workspace                                               | Func 6.1.4, Plan 5          | MOD-BE-FileSvc, MOD-FE-Download        | TC-FUNC-604 | GET /api/files/{id}/download |
| REQ-605  | Delete files from project                | functional      | high     | implemented | Delete files from project workspace with user confirmation                          | Func 6.1.5                  | MOD-BE-FileSvc, MOD-FE-FileList        | TC-FUNC-605 | Requires confirmation |
| REQ-606  | File metadata storage                    | functional      | high     | implemented | Store file metadata (name, size, type, upload date)                                 | Func 6.1.6                  | MOD-BE-FileSvc                         | TC-UNIT-606 | metadata.json per project |
| REQ-607  | Multiple file type support               | functional      | high     | implemented | Support text, images, PDFs, and Office documents                                     | Func 6.1.7                  | MOD-BE-FileSvc                         | TC-UNIT-607 | MIME type validation |
| REQ-608  | File size limits enforcement              | functional      | high     | implemented | Enforce 50MB per-file and 500MB per-project limits                                  | Func 6.1.8                  | MOD-BE-FileSvc                         | TC-UNIT-608 | Quota enforced |
| REQ-609  | Upload files to session directory        | functional      | medium   | implemented | Upload and store files specific to individual session                               | Func 6.2.1, Plan 5          | MOD-BE-FileSvc                         | TC-UNIT-609 | Session-isolated storage |
| REQ-610  | Session file isolation                   | functional      | medium   | implemented | Files isolated to specific session                                                   | Func 6.2.2                  | MOD-BE-FileSvc                         | TC-UNIT-610 | Per-session directory |
| REQ-611  | Session file listing                     | functional      | medium   | implemented | List files in session directory                                                      | Func 6.2.3                  | MOD-BE-FileSvc                         | TC-FUNC-611 | GET /api/files/sessions/{id} |
| REQ-612  | Download session files                   | functional      | medium   | implemented | Download files from session                                                          | Func 6.2.4, Plan 5          | MOD-BE-FileSvc                         | TC-FUNC-612 | GET /api/files/{id}/download |
| REQ-613  | Delete session files                     | functional      | medium   | implemented | Delete files from session with confirmation                                          | Func 6.2.5                  | MOD-BE-FileSvc                         | TC-FUNC-613 | Requires confirmation |
| REQ-614  | Session file metadata                    | functional      | medium   | implemented | Store file metadata for session files                                                | Func 6.2.6                  | MOD-BE-FileSvc                         | TC-UNIT-614 | Per-file tracking |
| REQ-615  | Include project files in AI context      | functional      | medium   | proposed   | Include project files in AI message context                                          | Func 6.3.1                  | MOD-BE-ConversationSvc, MOD-BE-FileSvc | TC-FUNC-615 | Phase 2 feature |
| REQ-616  | Include session files in AI context      | functional      | medium   | proposed   | Include session files in AI message context                                          | Func 6.3.2                  | MOD-BE-ConversationSvc, MOD-BE-FileSvc | TC-FUNC-616 | Phase 2 feature |
| REQ-617  | Export chat history as JSON              | functional      | medium   | proposed   | Export session chat history as JSON file                                             | Func 6.4.1                  | MOD-BE-ExportSvc                       | TC-FUNC-617 | Phase 3 feature |
| REQ-618  | Export chat history as markdown          | functional      | medium   | proposed   | Export session chat history as markdown file                                         | Func 6.4.2                  | MOD-BE-ExportSvc                       | TC-FUNC-618 | Phase 3 feature |
| REQ-619  | Export project data                      | functional      | medium   | proposed   | Export complete project with all sessions and files                                 | Func 6.4.3                  | MOD-BE-ExportSvc                       | TC-FUNC-619 | Phase 3 feature |
| REQ-620  | Import previously exported data          | functional      | medium   | proposed   | Import previously exported project or session data                                   | Func 6.4.4                  | MOD-BE-ImportSvc                       | TC-FUNC-620 | Phase 3 feature |

### VII. USER SETTINGS & PREFERENCES

| REQ_ID   | Title                                    | Type            | Priority | Status     | Description                                                                          | Sources                     | Modules (FE/BE)                        | Tests (IDs) | Notes |
|----------|------------------------------------------|-----------------|----------|-----------|--------------------------------------------------------------------------------------|-----------------------------|----------------------------------------|-------------|-------|
| REQ-701  | Dedicated settings page                  | functional      | high     | implemented | Settings page accessible from main menu with organized tabs/sections                | Func 7.1.1                  | MOD-FE-SettingsPage, MOD-BE-SettingsSvc | TC-FUNC-701 | Organized in tabs |
| REQ-702  | API key input fields                     | functional      | critical | implemented | Input field for each provider's API key with proper masking                         | Func 7.2.1                  | MOD-FE-SettingsPage                    | TC-FUNC-702 | One per provider |
| REQ-703  | Masked API key display                   | security        | critical | implemented | Display API keys masked (show first 10 chars only) in UI                            | Func 7.2.2                  | MOD-FE-SettingsPage                    | TC-FUNC-703 | e.g., "sk-...****" |
| REQ-704  | Copy API key to clipboard                | functional      | high     | implemented | Copy full (masked) key to clipboard while keeping display masked                    | Func 7.2.3                  | MOD-FE-SettingsPage                    | TC-FUNC-704 | Full key copied |
| REQ-705  | Validate API key format                  | functional      | high     | implemented | Validate API key format before saving to prevent invalid entries                    | Func 7.2.4                  | MOD-BE-SettingsSvc                     | TC-UNIT-705 | Provider-specific validation |
| REQ-706  | Test API key connectivity                | functional      | high     | implemented | Test button to verify provider API key is valid and working                        | Func 7.2.5                  | MOD-BE-SettingsSvc, MOD-FE-SettingsPage | TC-FUNC-706 | Makes test API call |
| REQ-707  | Test result status display               | functional      | high     | implemented | Show test result status (✓ valid / ✗ invalid) with explanation                    | Func 7.2.6                  | MOD-FE-SettingsPage                    | TC-FUNC-707 | Green/red indicator |
| REQ-708  | Save API keys to .env file               | security        | critical | implemented | Persist API key updates to .env file at project root                                | Func 7.2.7                  | MOD-BE-SettingsSvc                     | TC-UNIT-708 | Standard .env format |
| REQ-709  | Update .env without restart              | functional      | critical | implemented | Update .env file and apply changes without requiring application restart            | Func 7.2.8                  | MOD-BE-SettingsSvc                     | TC-UNIT-709 | Hot-reload implementation |
| REQ-710  | Secure API key storage                   | security        | critical | implemented | Store API keys only on server in .env file, never in browser localStorage           | Func 7.2.9                  | MOD-BE-SettingsSvc                     | TC-UNIT-710 | Server-side only |
| REQ-711  | Theme selection                          | functional      | medium   | proposed   | Allow user to select light/dark/auto theme                                          | Func 7.3.1                  | MOD-FE-ThemeProvider                   | TC-FUNC-711 | Phase 2 feature |
| REQ-712  | Default project selection                | functional      | medium   | proposed   | Allow setting default project for new sessions                                      | Func 7.3.2                  | MOD-FE-SettingsPage, MOD-BE-SettingsSvc | TC-FUNC-712 | Phase 2 feature |
| REQ-713  | Default provider selection               | functional      | medium   | proposed   | Allow setting default AI provider for conversations                                 | Func 7.3.3                  | MOD-FE-SettingsPage, MOD-BE-SettingsSvc | TC-FUNC-713 | Phase 2 feature |
| REQ-714  | Auto-save interval configuration         | functional      | medium   | proposed   | Configure auto-save interval for session data                                       | Func 7.3.4                  | MOD-FE-SettingsPage, MOD-BE-SettingsSvc | TC-FUNC-714 | Phase 2 feature |
| REQ-715  | Notification preferences                 | functional      | medium   | proposed   | Enable/disable notifications for events                                             | Func 7.3.5                  | MOD-FE-SettingsPage, MOD-BE-SettingsSvc | TC-FUNC-715 | Phase 2 feature |
| REQ-716  | Data export functionality                | functional      | low      | proposed   | Export all data (projects, sessions, files) for backup                              | Func 7.4.1                  | MOD-BE-ExportSvc                       | TC-FUNC-716 | Phase 3 feature |
| REQ-717  | Data import functionality                | functional      | low      | proposed   | Import previously exported data or migrate from other systems                       | Func 7.4.2                  | MOD-BE-ImportSvc                       | TC-FUNC-717 | Phase 3 feature |
| REQ-718  | Cache clear option                       | functional      | low      | proposed   | Clear application cache and temporary files                                         | Func 7.4.3                  | MOD-FE-Cache, MOD-BE-CacheMgmt         | TC-FUNC-718 | Phase 3 feature |
| REQ-719  | Application reset option                 | functional      | low      | proposed   | Reset application to factory defaults (clear all data)                              | Func 7.4.5                  | MOD-BE-SettingsSvc                     | TC-FUNC-719 | Phase 3 feature |

### VIII. ADVANCED & FUTURE FEATURES

| REQ_ID   | Title                                    | Type            | Priority | Status     | Description                                                                          | Sources                     | Modules (FE/BE)                        | Tests (IDs) | Notes |
|----------|------------------------------------------|-----------------|----------|-----------|--------------------------------------------------------------------------------------|-----------------------------|----------------------------------------|-------------|-------|
| REQ-801  | Multi-line text with syntax highlighting | functional      | medium   | proposed   | Support multi-line text input with syntax highlighting for code                     | Func 8.1.1                  | MOD-FE-CodeEditor                      | TC-FUNC-801 | Phase 2 feature |
| REQ-802  | Markdown formatting support              | functional      | medium   | proposed   | Support markdown formatting (bold, italic, code blocks, links)                      | Func 8.1.2                  | MOD-FE-MessageFormatter                | TC-FUNC-802 | Phase 2 feature |
| REQ-803  | Message editing after sending            | functional      | medium   | proposed   | Allow editing messages after they've been sent                                       | Func 8.1.3                  | MOD-BE-ConversationSvc, MOD-FE-ChatMessage | TC-FUNC-803 | Phase 2 feature |
| REQ-804  | Message threading/replies                | functional      | medium   | proposed   | Support threaded conversations with reply functionality                              | Func 8.1.7                  | MOD-BE-ConversationSvc, MOD-FE-ChatArea | TC-FUNC-804 | Phase 2 feature |
| REQ-805  | Global search across sessions            | functional      | medium   | proposed   | Search messages and files across all sessions and projects                          | Func 8.2.1                  | MOD-BE-SearchSvc, MOD-FE-SearchPage    | TC-FUNC-805 | Phase 3 feature |
| REQ-806  | Search filtering by date range           | functional      | medium   | proposed   | Filter search results by date range                                                 | Func 8.2.3                  | MOD-BE-SearchSvc                       | TC-FUNC-806 | Phase 3 feature |
| REQ-807  | Search filtering by provider             | functional      | medium   | proposed   | Filter search results by AI provider                                                | Func 8.2.4                  | MOD-BE-SearchSvc                       | TC-FUNC-807 | Phase 3 feature |
| REQ-808  | Session archiving instead of delete      | functional      | low      | proposed   | Archive sessions instead of permanent deletion                                      | Func 8.3.1                  | MOD-BE-ChatSessionSvc                  | TC-FUNC-808 | Phase 4 feature |
| REQ-809  | Restore archived sessions                | functional      | low      | proposed   | Support restoring previously archived sessions                                      | Func 8.3.2                  | MOD-BE-ChatSessionSvc                  | TC-FUNC-809 | Phase 4 feature |
| REQ-810  | Auto-cleanup old sessions                | functional      | low      | proposed   | Automatically clean up sessions older than configurable threshold                  | Func 8.3.3                  | MOD-BE-ChatSessionSvc                  | TC-FUNC-810 | Phase 4 feature |
| REQ-811  | Storage size monitoring                  | functional      | low      | proposed   | Monitor and display total storage usage                                             | Func 8.3.4                  | MOD-BE-StorageSvc                      | TC-FUNC-811 | Phase 4 feature |
| REQ-812  | Compression of old message histories     | functional      | low      | proposed   | Compress old message histories to optimize storage                                  | Func 8.3.5                  | MOD-BE-StorageSvc                      | TC-FUNC-812 | Phase 4 feature |
| REQ-813  | Reference other sessions in context      | functional      | low      | proposed   | Link and reference messages from other chat sessions                                | Func 8.4.1                  | MOD-BE-ConversationSvc                 | TC-FUNC-813 | Phase 4 feature |
| REQ-814  | Multi-model comparison                   | functional      | low      | proposed   | Send same prompt to multiple providers and compare responses side-by-side           | Func 8.6.1                  | MOD-BE-ConversationSvc, MOD-FE-Comparison | TC-FUNC-814 | Phase 4 feature |
| REQ-815  | Response time/cost comparison            | functional      | low      | proposed   | Compare response times and token costs across providers                              | Func 8.6.4                  | MOD-BE-AIProvider                      | TC-FUNC-815 | Phase 4 feature |

## 3. Notes

- Add one row per requirement.
- Always keep `Modules (FE/BE)` and `Tests (IDs)` updated.
- AI AGENTS: use this table to understand **what** must exist and where.
